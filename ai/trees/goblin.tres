[gd_resource type="BehaviorTree" load_steps=26 format=3 uid="uid://piwqn1nhutod"]

[ext_resource type="Script" path="res://ai/tasks/choose_random_position.gd" id="1_vd2ap"]
[ext_resource type="Script" path="res://ai/tasks/move_to_position.gd" id="2_0m5d1"]
[ext_resource type="Script" path="res://ai/tasks/find_target.gd" id="3_fyffu"]
[ext_resource type="Script" path="res://ai/tasks/move_to_target.gd" id="4_k4uv0"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_dinfl"]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_8monn"]
text = "Random move"

[sub_resource type="BTAction" id="BTAction_q05gv"]
script = ExtResource("1_vd2ap")
range_min_in_dir = 40.0
range_max_in_dir = 100.0
position_var = &"pos"
dir_var = &"dir"

[sub_resource type="BTAction" id="BTAction_8uk7o"]
script = ExtResource("2_0m5d1")
target_pos_var = &"pos"
dir_var = &"dir"
speed_var = 40
tolerance = 10

[sub_resource type="BTRandomWait" id="BTRandomWait_jaedv"]
max_duration = 4.0

[sub_resource type="BTSequence" id="BTSequence_hgejg"]
custom_name = "IdleSequence"
children = [SubResource("BTRandomWait_jaedv")]

[sub_resource type="BTSequence" id="BTSequence_kxjum"]
custom_name = "RandomMoveSequence"
children = [SubResource("BTConsolePrint_8monn"), SubResource("BTAction_q05gv"), SubResource("BTAction_8uk7o"), SubResource("BTSequence_hgejg")]

[sub_resource type="BTProbability" id="BTProbability_khjwj"]
children = [SubResource("BTSequence_kxjum")]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_f4jg6"]
text = "Move to Goblin"

[sub_resource type="BTAction" id="BTAction_aigm0"]
script = ExtResource("3_fyffu")
group_var = &""
target_var = &"target"

[sub_resource type="BTAction" id="BTAction_yyght"]
script = ExtResource("4_k4uv0")
target_var = &"target"
speed_var = 60
tolerance = 100

[sub_resource type="BTWait" id="BTWait_80ud6"]
duration = 2.0

[sub_resource type="BTSequence" id="BTSequence_27mof"]
custom_name = "MoveToEnemySequence"
children = [SubResource("BTConsolePrint_f4jg6"), SubResource("BTAction_aigm0"), SubResource("BTAction_yyght"), SubResource("BTWait_80ud6")]

[sub_resource type="BTProbability" id="BTProbability_ddtjk"]
children = [SubResource("BTSequence_27mof")]

[sub_resource type="BTConsolePrint" id="BTConsolePrint_ng2cj"]
text = "Move to player"

[sub_resource type="BTAction" id="BTAction_h3l5m"]
script = ExtResource("3_fyffu")
group_var = &""
target_var = &"target"

[sub_resource type="BTAction" id="BTAction_smhj7"]
script = ExtResource("4_k4uv0")
target_var = &"target"
speed_var = 80
tolerance = 80

[sub_resource type="BTWait" id="BTWait_070ff"]
duration = 2.0

[sub_resource type="BTSequence" id="BTSequence_aen40"]
custom_name = "MoveToPlayerSequence"
children = [SubResource("BTConsolePrint_ng2cj"), SubResource("BTAction_h3l5m"), SubResource("BTAction_smhj7"), SubResource("BTWait_070ff")]

[sub_resource type="BTProbability" id="BTProbability_knb0q"]
run_chance = 0.3
children = [SubResource("BTSequence_aen40")]

[sub_resource type="BTSelector" id="BTSelector_c64d8"]
children = [SubResource("BTProbability_khjwj"), SubResource("BTProbability_ddtjk"), SubResource("BTProbability_knb0q")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_dinfl")
root_task = SubResource("BTSelector_c64d8")
